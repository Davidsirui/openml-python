.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_20_basic_simple_flows_and_runs_tutorial.py>`     to download the full example code
    .. rst-class:: sphx-glr-example-title

    .. _sphx_glr_examples_20_basic_simple_flows_and_runs_tutorial.py:


Flows and Runs
==============

A simple tutorial on how to train/run a model and how to upload the results.


.. code-block:: default


    # License: BSD 3-Clause

    import openml
    from sklearn import ensemble, neighbors








Train a machine learning model
==============================

.. warning:: This example uploads data. For that reason, this example
  connects to the test server at test.openml.org. This prevents the main
  server from crowding with example datasets, tasks, runs, and so on.


.. code-block:: default


    openml.config.start_using_configuration_for_example()

    # NOTE: We are using dataset 20 from the test server: https://test.openml.org/d/20
    dataset = openml.datasets.get_dataset(20)
    X, y, categorical_indicator, attribute_names = dataset.get_data(
        dataset_format="array", target=dataset.default_target_attribute
    )
    clf = neighbors.KNeighborsClassifier(n_neighbors=3)
    clf.fit(X, y)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    KNeighborsClassifier(algorithm='auto', leaf_size=30, metric='minkowski',
                         metric_params=None, n_jobs=None, n_neighbors=3, p=2,
                         weights='uniform')



Running a model on a task
=========================


.. code-block:: default


    task = openml.tasks.get_task(119)
    clf = ensemble.RandomForestClassifier()
    run = openml.runs.run_model_on_task(clf, task)
    print(run)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    /home/travis/miniconda/envs/testenv/lib/python3.7/site-packages/sklearn/ensemble/forest.py:245: FutureWarning: The default value of n_estimators will change from 10 in version 0.20 to 100 in 0.22.
      "10 in version 0.20 to 100 in 0.22.", FutureWarning)
    OpenML Run
    ==========
    Uploader Name: None
    Metric.......: None
    Run ID.......: None
    Task ID......: 119
    Task Type....: None
    Task URL.....: https://test.openml.org/t/119
    Flow ID......: 26046
    Flow Name....: sklearn.ensemble.forest.RandomForestClassifier
    Flow URL.....: https://test.openml.org/f/26046
    Setup ID.....: None
    Setup String.: Python_3.7.7. Sklearn_0.21.2. NumPy_1.19.1. SciPy_1.5.2. RandomForestClassifier(bootstrap=True, class_weight=None, criterion='gini',
                           max_depth=None, max_features='auto', max_leaf_nodes=None,
                           min_impurity_decrease=0.0, min_impurity_split=None,
                           min_samples_leaf=1, min_samples_split=2,
                           min_weight_fraction_leaf=0.0, n_estimators='warn',
                           n_jobs=None, oob_score=False, random_state=63886,
                           verbose=0, warm_start=False)
    Dataset ID...: 20
    Dataset URL..: https://test.openml.org/d/20




Publishing the run
==================


.. code-block:: default


    myrun = run.publish()
    print("Run was uploaded to http://test.openml.org/r/" + str(myrun.run_id))
    print("The flow can be found at http://test.openml.org/f/" + str(myrun.flow_id))





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Run was uploaded to http://test.openml.org/r/99664
    The flow can be found at http://test.openml.org/f/26046





.. code-block:: default

    openml.config.stop_using_configuration_for_example()








.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  6.779 seconds)


.. _sphx_glr_download_examples_20_basic_simple_flows_and_runs_tutorial.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: simple_flows_and_runs_tutorial.py <simple_flows_and_runs_tutorial.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: simple_flows_and_runs_tutorial.ipynb <simple_flows_and_runs_tutorial.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
